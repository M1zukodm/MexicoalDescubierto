<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Viajes</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="fontawesome-free-6.5.1-web/css/all.min.css">
    <link rel="icon" href="recursos/viajes.svg" type="image/x-icon">
    <link rel="stylesheet" href="css/miestilo.css">
    <link rel="stylesheet" href="css/viajes.css">
</head>
<body id="cuerpo" class="text-center">
    <nav class="navbar navbar-expand-lg navbar-light" id="barra"> 
        <div class="container-fluid d-flex justify-content-between align-items-center"> 
            <a class="navbar-brand" href="index.html"> 
                <img src="recursos/logo.png" alt="logo" title="Mi blog de viajes" style="height: 40px;"> 
            </a> 
            <h1 class="flex-grow-1 text-center" style="font-family: 'Playfair Display', serif; color: black; font-size: 60px;">
                <b>Tus viajes</b>
            </h1> 
        </div> 
    </nav>

    <div class="comments-section">
        <h2>Cuenta tu experiencia viajando</h2>
        
        <div class="comment-form">
            <!-- Formulario para enviar datos a guardar_viaje.php -->
            <form id="commentForm" enctype="multipart/form-data" method="POST" action="php/guardar_viaje.php">
                <label for="title">Título:</label>
                <input type="text" id="title" name="title" required>
                
                <label for="photo">Foto:</label>
                <input type="file" id="photo" name="photo" accept="image/*">
                
                <label for="name">Nombre:</label>
                <input type="text" id="name" name="name" required>
                
                <label for="comment">Comentario:</label>
                <textarea id="comment" name="comment" rows="4" required></textarea>
                
                <button type="submit" class="btn btn-primary mt-3">Enviar</button>
            </form>
        </div>
    </div>

    <div class="comments-list mt-5">
        <h3>Comentarios Recientes</h3>
        <div class="container">
            <div class="row" id="viajesContainer">
                <!-- Aquí se insertarán los viajes dinámicamente -->
            </div>
        </div>
    </div>

    <div style="text-align: center; margin-top: 20px;">
        <button onclick="window.location.href='index.html'" class="btn btn-success mx-2 my-2" style="padding: 10px 20px; font-size: 16px; cursor: pointer;">
            <i class="fa-solid fa-house"></i> Volver al Inicio
        </button>
    </div>

    <script src="js/bootstrap.min.js"></script>
    <script>
        // Cargar los registros dinámicamente usando AJAX
        document.addEventListener('DOMContentLoaded', function () {
            fetch('php/obtener_viajes.php')
                .then(response => response.text())
                .then(data => {
                    document.getElementById('viajesContainer').innerHTML = data;
                })
                .catch(error => console.error('Error al cargar los viajes:', error));
        });
    </script>
</body>
</html>